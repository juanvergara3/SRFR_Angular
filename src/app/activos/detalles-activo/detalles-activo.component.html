<modales-detalles-activo [idActivo]="activoItem.id_activo"></modales-detalles-activo>

<top-bar>
    <button class="secondary-menu-main-button" id="nueva_entrega" onclick="newEntregaModal.showModal()">+ Nueva entrega</button>
</top-bar>

<div class="container-row" [ngStyle]="{'gap':'15px'}">

    <div class="item-details" [ngStyle]="{'overflow':'hidden', 'overflow-y':'hidden', 'height':'auto'}">
        <div class="container-row" [ngStyle]="{'height':'auto', 'justify-content':'space-between'}">

            <input 
                type="text" 
                class="item-input item-title-input" 
                [readonly]="!editing" 
                placeholder="Número de serie"
                [(ngModel)]="numeroSerie">

            <div class="container-row item-button-container">
                <button class="item-button" id="editar_responsable" (click)="editing = true" *ngIf="!editing">
                    <img class="item-icon" src="../../assets/icons/edit_icon.png" alt="Ícono de edición">
                </button>
                <!-- <button class="item-submit-button" (click)="submitEditActivo()" *ngIf="editing"
                    [disabled]="(nombre == '' || direccion == '')" >✓</button>  -->
                <button class="item-cancel-button item-button" (click)="resetValues()" *ngIf="editing">X</button>
            </div>
            <!-- <button class="go-back-button" type="button" (click)="goBack()">Volver &#60;---</button> -->
        </div>

        <hr class="separator">

        <div class="container-row" [ngStyle]="{'height':'auto', 'align-items':'center'}">



            <select class="dropdown" title="tipo_dropdown" [(ngModel)]="tipoSignal().id_tipo">
                <option *ngFor="let tipo of tiposArray()" [value]="tipo.id_tipo">{{tipo.formfactor}}</option> 
            </select>



            <div class="item-details-text">{{ marcaSignal().nombre }}</div>                                     <!-- ESTE ES UN DROPDOWN -->
            <div class="container-row" [ngStyle]="{'align-items': 'center', 'gap': !editing ? '0px' : '1ch'}">
                <div class="item-details-text">Modelo</div>
                <input 
                    type="text" 
                    class="item-input item-detail" 
                    [readonly]="!editing" 
                    placeholder="Modelo"
                    [(ngModel)]="modelo">
            </div>
        </div>

        <hr class="separator">

        <div class="container-row" [ngStyle]="{'height':'auto', 'align-items':'center'}">
            <div class="item-details-text">Estado:</div> <!-- ESTE ES UN DROPDOWN -->
            <div class="item-details-estado" [ngStyle]="{'background-color': '#' + estadoSignal().color, 'color': contrastColorComputed(), 'border-color': contrastColorComputed()}">{{estadoSignal().estado}}</div>
        </div>

        <hr class="separator">

        <div class="container-row" [ngStyle]="{'height':'auto', 'align-items': 'center', 'gap':!editing ? '0px' : '1ch'}">
            <div class="item-details-text" [ngStyle]="{'min-width':'fit-content'}">Precio de renta mensual:</div>
            <input 
            type="number" 
            class="item-input item-detail" 
            [readonly]="!editing" 
            placeholder="Precio de renta"
            [(ngModel)]="precioRenta">
        </div>

        <hr class="separator">

        <div class="container-column" [ngStyle]="{'height':'auto'}">
            <div class="item-details-text">Proveedor: {{proveedorSignal().nombre}}</div>                        <!-- ESTE ES UN DROPDOWN -->
            <div class="container-row" [ngStyle]="{'height':'auto', 'align-items': 'center', 'gap':!editing ? '0px' : '1ch'}">
                <div class="item-details-text" [ngStyle]="{'min-width':'fit-content'}">Comprado con factura:</div>
                <input 
                    type="text" 
                    class="item-input item-detail" 
                    [readonly]="!editing" 
                    placeholder="Factura de compra"
                    [(ngModel)]="facturaCompra">
            </div>
            <div class="container-row" [ngStyle]="{'height':'auto', 'align-items': 'center', 'gap':!editing ? '0px' : '1ch'}">
                <div class="item-details-text" [ngStyle]="{'min-width':'fit-content'}">Comprado en:</div>
                <input 
                    type='date'
                    class="item-input item-detail" 
                    [readonly]="!editing" 
                    placeholder="please"
                    [ngModel]="fechaCompra | date: 'yyyy-MM-dd':'+0:01'"
                    (ngModelChange)="fechaCompra = $event">
            </div>
            <div class="container-row" [ngStyle]="{'height':'auto', 'align-items': 'center', 'gap':!editing ? '0px' : '1ch'}">
                <div class="item-details-text" [ngStyle]="{'min-width':'fit-content'}">Valor comercial:</div>
                <input 
                type="number" 
                class="item-input item-detail" 
                [readonly]="!editing" 
                placeholder="Valor comercial"
                [(ngModel)]="valor">
            </div>
        </div>

        <hr class="separator">
        <div class="item-details-text">Activo prestado por: {{prestadorSignal().nombre}}</div>                      <!-- ESTE ES UN DROPDOWN -->
    </div>

    <div class="container-column" [ngStyle]="{'overflow':'hidden', 'overflow-y':'hidden', 'height':'auto'}">
        <label class="window-title">Periodos asociados</label>
        <div class="item-container">

            <periodo-detalles-activo *ngFor="let periodo of periodosArray()" [periodoItem]="periodo"></periodo-detalles-activo>

        </div>
    </div>

    <div class="container-column" [ngStyle]="{'overflow':'hidden', 'overflow-y':'hidden', 'height':'auto'}">
        <label class="window-title">Entregas asociadas</label>
        <div class="item-container">

            <entrega-detalles-activo *ngFor="let entrega of entregasArray()" [entregaItem]="entrega"></entrega-detalles-activo>

        </div>
    </div>
</div>
